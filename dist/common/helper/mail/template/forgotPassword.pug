doctype html
html(lang="id")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    title Reset Password - #{propertyName}
    style.
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; line-height: 1.6; color: #374151; background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%); padding: 20px 0; }
      .email-container { max-width: 600px; margin: 0 auto; background: #ffffff; border-radius: 20px; overflow: hidden; box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15); }
      .header { background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%); padding: 40px 30px; text-align: center; position: relative; overflow: hidden; }
      .header::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%); animation: security-scan 3s ease-in-out infinite; }
      @keyframes security-scan { 0%, 100% { transform: translateX(-100%) rotate(0deg); opacity: 0.3; } 50% { transform: translateX(100%) rotate(360deg); opacity: 0.8; } }
      .logo { width: 80px; height: 80px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 32px; color: white; position: relative; z-index: 1; backdrop-filter: blur(10px); animation: lock-shake 2s ease-in-out infinite; }
      @keyframes lock-shake { 0%, 90%, 100% { transform: translateX(0); } 10%, 30%, 50%, 70% { transform: translateX(-2px); } 20%, 40%, 60%, 80% { transform: translateX(2px); } }
      .header h1 { color: #ffffff; font-size: 28px; font-weight: 700; margin-bottom: 8px; position: relative; z-index: 1; }
      .header p { color: rgba(255, 255, 255, 0.9); font-size: 16px; position: relative; z-index: 1; font-weight: 500; }
      .content { padding: 40px 30px; }
      .security-alert { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border: 1px solid #f59e0b; border-radius: 16px; padding: 20px; margin-bottom: 30px; display: flex; align-items: flex-start; position: relative; overflow: hidden; }
      .security-alert::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, #f59e0b, #d97706, #b45309); }
      .alert-icon { width: 24px; height: 24px; background: #f59e0b; border-radius: 50%; margin-right: 12px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; color: white; font-size: 14px; font-weight: bold; animation: pulse-alert 1.5s ease-in-out infinite; }
      @keyframes pulse-alert { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
      .alert-content h3 { font-size: 14px; font-weight: 600; color: #92400e; margin-bottom: 4px; }
      .alert-text { font-size: 13px; color: #92400e; line-height: 1.5; }
      .greeting { font-size: 20px; font-weight: 600; color: #1f2937; margin-bottom: 16px; }
      .message { font-size: 16px; color: #6b7280; margin-bottom: 30px; line-height: 1.7; }
      .reset-section { background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%); border: 1px solid #7c3aed; border-radius: 16px; padding: 30px; text-align: center; margin: 30px 0; position: relative; overflow: hidden; }
      .reset-section::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, #7c3aed, #a855f7, #c084fc); }
      .reset-title { font-size: 20px; font-weight: 600; color: #581c87; margin-bottom: 12px; }
      .reset-description { font-size: 14px; color: #7c2d92; margin-bottom: 24px; }
      .reset-button { display: inline-block; background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%); color: white; text-decoration: none; padding: 16px 32px; border-radius: 12px; font-weight: 600; font-size: 16px; text-align: center; margin: 12px 0; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(124, 58, 237, 0.3); position: relative; overflow: hidden; }
      .reset-button::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.5s; }
      .reset-button:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(124, 58, 237, 0.4); }
      .reset-button:hover::before { left: 100%; }
      .expiry-notice { background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%); border: 1px solid #ef4444; border-radius: 12px; padding: 20px; margin: 20px 0; display: flex; align-items: center; }
      .expiry-icon { width: 40px; height: 40px; background: #ef4444; border-radius: 50%; margin-right: 16px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; color: white; font-size: 18px; }
      .expiry-content { flex: 1; }
      .expiry-title { font-size: 14px; font-weight: 600; color: #b91c1c; margin-bottom: 4px; }
      .expiry-text { font-size: 13px; color: #b91c1c; line-height: 1.4; }
      .countdown-timer { background: #1f2937; color: white; padding: 12px 16px; border-radius: 8px; text-align: center; margin: 12px 0; font-family: 'Monaco', 'Consolas', monospace; font-weight: 600; letter-spacing: 1px; }
      .user-info { background: #f8fafc; border-left: 4px solid #7c3aed; padding: 20px; margin: 30px 0; border-radius: 0 12px 12px 0; }
      .user-info h3 { color: #1f2937; font-size: 16px; font-weight: 600; margin-bottom: 12px; }
      .info-item { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px; }
      .info-label { font-weight: 500; color: #6b7280; }
      .info-value { font-weight: 600; color: #1f2937; }
      .security-tips { background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border: 1px solid #0ea5e9; border-radius: 16px; padding: 24px; margin: 30px 0; }
      .tips-title { font-size: 18px; font-weight: 600; color: #0c4a6e; margin-bottom: 16px; display: flex; align-items: center; }
      .tips-icon { margin-right: 8px; font-size: 20px; }
      .tips-list { list-style: none; padding: 0; }
      .tip-item { display: flex; align-items: flex-start; margin-bottom: 12px; font-size: 14px; color: #0c4a6e; }
      .tip-item:last-child { margin-bottom: 0; }
      .tip-bullet { width: 20px; height: 20px; background: #0ea5e9; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 10px; font-weight: bold; margin-right: 12px; flex-shrink: 0; margin-top: 1px; }
      .not-you-section { background: #f9fafb; border: 1px solid #d1d5db; border-radius: 12px; padding: 20px; text-align: center; margin: 30px 0; }
      .not-you-title { font-size: 16px; font-weight: 600; color: #1f2937; margin-bottom: 8px; }
      .not-you-text { font-size: 14px; color: #6b7280; margin-bottom: 16px; }
      .contact-support { display: inline-flex; align-items: center; background: #6b7280; color: white; text-decoration: none; padding: 10px 20px; border-radius: 8px; font-size: 14px; font-weight: 500; transition: all 0.3s ease; }
      .contact-support:hover { background: #4b5563; transform: translateY(-1px); }
      .contact-icon { margin-right: 8px; }
      .footer { background: #f9fafb; padding: 30px; text-align: center; border-top: 1px solid #e5e7eb; }
      .footer-text { font-size: 14px; color: #6b7280; margin-bottom: 16px; }
      .footer-links { display: flex; justify-content: center; gap: 20px; margin-bottom: 20px; }
      .footer-link { color: #7c3aed; text-decoration: none; font-size: 14px; font-weight: 500; }
      .footer-link:hover { text-decoration: underline; }
      .copyright { font-size: 12px; color: #9ca3af; }
      @media (max-width: 600px) { .email-container { margin: 0 10px; border-radius: 16px; } .content, .header, .footer { padding: 20px; } .reset-button { width: 100%; max-width: 300px; } .footer-links { flex-direction: column; gap: 12px; } .info-item { flex-direction: column; gap: 4px; } }

  body
    .email-container
      .header
        .logo üîê
        h1 Reset Password
        p #{propertyName || 'Property Management System'}
      
      .content
        .security-alert
          .alert-icon ‚ö†
          .alert-content
            h3 Security Alert
            .alert-text Permintaan reset password telah diterima untuk akun Anda. 
              | Jika bukan Anda yang melakukan ini, segera hubungi customer service.
        
        .greeting Halo #{fullName},
        
        .message Kami menerima permintaan untuk mereset password akun Anda. 
          | Untuk keamanan, silakan klik tombol di bawah ini untuk membuat password baru.
        
        .user-info
          h3 üìã Informasi Akun
          .info-item
            span.info-label Email:
            span.info-value #{email}
          .info-item
            span.info-label Waktu Permintaan:
            span.info-value #{requestTime || new Date().toLocaleString('id-ID')}
          if propertyName
            .info-item
              span.info-label Property:
              span.info-value #{propertyName}
          if unitNumber
            .info-item
              span.info-label Unit Number:
              span.info-value #{unitNumber}
        
        .reset-section
          h3.reset-title üîë Reset Password Anda
          p.reset-description Klik tombol di bawah untuk diarahkan ke halaman reset password yang aman.
          
          a.reset-button(href=resetUrl) Reset Password Sekarang
          
          .expiry-notice
            .expiry-icon ‚è∞
            .expiry-content
              .expiry-title Link Berlaku Terbatas
              .expiry-text Link ini akan kedaluwarsa dalam 30 menit untuk keamanan akun Anda.
          
          .countdown-timer ‚è≥ Berakhir dalam: 30 Menit
        
        .security-tips
          .tips-title
            span.tips-icon üõ°Ô∏è
            | Tips Keamanan Password
          ul.tips-list
            li.tip-item
              .tip-bullet 1
              div Gunakan kombinasi huruf besar, kecil, angka, dan simbol
            li.tip-item
              .tip-bullet 2
              div Minimal 8 karakter, lebih panjang lebih aman
            li.tip-item
              .tip-bullet 3
              div Hindari menggunakan informasi personal yang mudah ditebak
            li.tip-item
              .tip-bullet 4
              div Jangan gunakan password yang sama di platform lain
            li.tip-item
              .tip-bullet 5
              div Simpan password di tempat yang aman atau gunakan password manager
        
        .not-you-section
          .not-you-title üö´ Bukan Anda yang meminta ini?
          .not-you-text Jika Anda tidak merasa melakukan permintaan reset password ini, 
            | segera hubungi tim customer service kami.
          a.contact-support(href="mailto:support@#{propertyName || 'propertymanagement'}.com")
            span.contact-icon üìß
            | Hubungi Customer Service
        
        .message
          p
            strong Penting:
            |  Jangan bagikan link reset password ini kepada siapapun. 
            | Tim kami tidak akan pernah meminta password atau informasi login Anda melalui email atau telepon.
      
      .footer
        .footer-text Email ini dikirim secara otomatis dari sistem keamanan kami. 
          | Mohon jangan membalas email ini.
        .footer-links
          a.footer-link(href="#") Kebijakan Privasi
          a.footer-link(href="#") Syarat & Ketentuan
          a.footer-link(href="#") Pusat Bantuan
          a.footer-link(href="#") Hubungi Kami
        .copyright ¬© #{year} #{propertyName || 'Property Management System'}. All rights reserved.